services:
  # ��一服务 - 同时提供 API 和前端
  - type: web
    name: z-image-unified
    env: python
    repo: https://github.com/xianyu110/z-image.git
    buildCommand: |
      pip install -r requirements.txt
    startCommand: |
      python zimage_proxy_unified.py
    envVars:
      - key: PORT
        value: 8000
      - key: PYTHONUNBUFFERED
        value: "true"
      - key: ZIMAGE_API_HOST
        value: https://zimage.run
      - key: ENABLE_KEEP_ALIVE
        value: "true"
      - key: DEBUG
        value: "false"
    healthCheckPath: /health
    autoDeploy: true